{"version":3,"file":"Server.js","sourceRoot":"","sources":["../src/Server.ts"],"names":[],"mappings":";;;;AAAA,iCAA+C;AAC/C,yCAAiD;AACjD,kCAAgC,CAAC,uBAAuB;AACxD,sEAAqC;AACrC,sEAAmC;AACnC,0EAAyC;AACzC,8EAA6C;AAC7C,wDAAwB;AACxB,qBAAmB;AACnB,yBAAuB;AACvB,qCAAyC;AACzC,yEAA8D;AA+B9D,IAAa,MAAM,GAAnB,MAAa,MAAM;IAEjB,GAAG,CAAsB;IAGzB,QAAQ,CAAgB;IAExB,iBAAiB;QACf,IAAI,CAAC,GAAG;aACL,GAAG,CAAC,cAAI,EAAE,CAAC;aACX,GAAG,CAAC,uBAAY,EAAE,CAAC;aACnB,GAAG,CAAC,qBAAQ,CAAC,EAAE,CAAC,CAAC;aACjB,GAAG,CAAC,yBAAc,EAAE,CAAC;aACrB,GAAG,CAAC,qBAAU,CAAC,IAAI,EAAE,CAAC;aACtB,GAAG,CAAC,qBAAU,CAAC,UAAU,CAAC;YACzB,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC,CAAC;IACR,CAAC;CACF,CAAA;AAhBC;IADC,WAAM,EAAE;sCACJ,4BAAmB;mCAAC;AAGzB;IADC,kBAAa,EAAE;;wCACQ;AALb,MAAM;IA7BlB,kBAAa,CAAC;QACb,GAAG,eAAM;QACT,WAAW,EAAE,CAAC,kBAAkB,CAAC;QACjC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI;QAClC,SAAS,EAAE,KAAK;QAChB,KAAK,EAAE;YACL,OAAO,EAAE;gBACP,GAAG,gBAAO,sBAAsB;aACjC;YACD,GAAG,EAAE,CAAC,2BAAS,CAAC;SACjB;QACD,OAAO,EAAE;YACP;gBACE,IAAI,EAAE,UAAU;gBAChB,WAAW,EAAE,KAAK;aACnB;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,WAAW,EAAE,OAAO;aACrB;SACF;QACD,KAAK,EAAE;YACL,IAAI,EAAE,GAAG,gBAAO,WAAW;YAC3B,UAAU,EAAE,KAAK;SAClB;QACD,OAAO,EAAE;YACP,cAAc;SACf;KACF,CAAC;GACW,MAAM,CAkBlB;AAlBY,wBAAM","sourcesContent":["import {Configuration, Inject} from \"@tsed/di\";\nimport {PlatformApplication} from \"@tsed/common\";\nimport \"@tsed/platform-express\"; // /!\\ keep this import\nimport bodyParser from \"body-parser\";\nimport compress from \"compression\";\nimport cookieParser from \"cookie-parser\";\nimport methodOverride from \"method-override\";\nimport cors from \"cors\";\nimport \"@tsed/ajv\";\nimport \"@tsed/swagger\";\nimport {config, rootDir} from \"./config\";\nimport {IndexCtrl} from \"./controllers/pages/IndexController\";\n\n@Configuration({\n  ...config,\n  acceptMimes: [\"application/json\"],\n  httpPort: process.env.PORT || 8083,\n  httpsPort: false, // CHANGE\n  mount: {\n    \"/rest\": [\n      `${rootDir}/controllers/**/*.ts`\n    ],\n    \"/\": [IndexCtrl]\n  },\n  swagger: [\n    {\n      path: \"/v2/docs\",\n      specVersion: \"2.0\"\n    },\n    {\n      path: \"/v3/docs\",\n      specVersion: \"3.0.1\"\n    }\n  ],\n  views: {\n    root: `${rootDir}/../views`,\n    viewEngine: \"ejs\"\n  },\n  exclude: [\n    \"**/*.spec.ts\"\n  ]\n})\nexport class Server {\n  @Inject()\n  app: PlatformApplication;\n\n  @Configuration()\n  settings: Configuration;\n\n  $beforeRoutesInit(): void {\n    this.app\n      .use(cors())\n      .use(cookieParser())\n      .use(compress({}))\n      .use(methodOverride())\n      .use(bodyParser.json())\n      .use(bodyParser.urlencoded({\n        extended: true\n      }));\n  }\n}\n"]}